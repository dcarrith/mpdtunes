$("#login_form").live("pageshow",function(){$.mobile.activeBtnClass="ui-btn-hover-g"});$("#register_form").live("pageshow",function(){$.mobile.activeBtnClass="ui-btn-hover-g";set_recaptcha_padding_and_width()});$("#paypal").live("pageshow",function(){$.mobile.activeBtnClass="ui-btn-hover-g"});$("#login_submit").live("click",function(){$("#login_submit").parent().addClass("ui-btn-hover-g")});$("#register_submit").live("click",function(){$("#register_submit").parent().addClass("ui-btn-hover-g")});
$("#paypal_submit").live("click",function(){$("#paypal_submit").parent().addClass("ui-btn-hover-g")});function set_recaptcha_padding_and_width(){var a=$("html,body").width(),a=Math.floor(0.98*a);280<a&&(a=Math.floor((a-280)/2),$("#recaptcha_image").css("padding-left",a+"px"),$("#recaptcha_image img").css("cursor","pointer"),$("#recaptcha_image img").css("width","280px !important"),$("#recaptcha_image img:hover").css("width","280px !important"))}
function refresh_recaptcha(){$("#recaptcha_image").fadeOut(100,function(){$("#recaptcha_image").parent().append("<img style='padding-top:15px;' src='images/ajax-loader-fast.gif' />");set_recaptcha_padding_and_width()});setTimeout(function(){$("img:last").remove();$("#recaptcha_image").fadeIn(500)},2E3)}function change_page(a,b,c,d){$.mobile.changePage(a,{transition:b,reloadPage:c,showLoadMsg:d})}
function incremental_scroll_up(){var a=$("html,body").height();current_scroll_position=$(window).scrollTop();a=current_scroll_position-a;0>a&&(a=0);$("html,body").animate({scrollTop:a},1E3,function(){})}function incremental_scroll_down(a){var b=$("html,body").height();current_scroll_position=$(window).scrollTop();var c=0;0<current_scroll_position&&(c=current_scroll_position);c+=b;$("html,body").animate({scrollTop:c},1E3,function(){});lazy_load_more_list_items(a,500)}
function attach_mousewheel_event(a){var b=null;switch(a){case "genres":b=document.getElementById("genresList");break;case "artists":b=document.getElementById("artistsList");break;case "albums":b=document.getElementById("albumsList");break;case "tracks":b=document.getElementById("tracksList");break;case "queue":b=document.getElementById("queueTracksList");break;case "playlists":b=document.getElementById("playlistList");break;case "stations":b=document.getElementById("stationsList");break;default:b=
document.getElementById("artistsList")}if("undefined"!=typeof b){var c=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";b.attachEvent?b.attachEvent("on"+c,function(){mousewheel_event_just_fired||(mousewheel_event_just_fired=!0,lazy_load_more_list_items(a,200),setTimeout(function(){mousewheel_event_just_fired=!1},1E3))}):b.addEventListener&&b.addEventListener(c,function(){mousewheel_event_just_fired||(mousewheel_event_just_fired=!0,lazy_load_more_list_items(a,200),setTimeout(function(){mousewheel_event_just_fired=
!1},1E3))},!1)}}function attach_window_scroll_event(a){$(window).scroll(function(){!window_scroll_event_just_fired&&!mousewheel_event_just_fired&&(window_scroll_event_just_fired=!0,lazy_load_more_list_items(a,200));setTimeout(function(){window_scroll_event_just_fired=false},1E3)})}
function lazy_load_more_list_items(a,b,c){load_the_rest=c||!1;setTimeout(function(){in_process_of_getting_more=!1;switch(a){case "genres":threshold=default_genres_bottom_threshold;selector="#genres";in_process_of_getting_more=in_process_of_getting_more_genres;break;case "artists":threshold=default_artists_bottom_threshold;selector="#artists";in_process_of_getting_more=in_process_of_getting_more_artists;break;case "albums":threshold=default_albums_bottom_threshold;selector="#albums";in_process_of_getting_more=
in_process_of_getting_more_albums;break;case "tracks":threshold=default_tracks_bottom_threshold;selector="#tracks";in_process_of_getting_more=in_process_of_getting_more_tracks;break;case "queue":threshold=default_queue_tracks_bottom_threshold;selector="#queue";in_process_of_getting_more=in_process_of_getting_more_queue_tracks;break;case "playlists":threshold=default_playlists_bottom_threshold;selector="#playlists";in_process_of_getting_more=in_process_of_getting_more_playlists;break;case "stations":threshold=
default_stations_bottom_threshold;selector="#stations";in_process_of_getting_more=in_process_of_getting_more_stations;break;default:threshold=default_artists_bottom_threshold,selector="#artists",in_process_of_getting_more=in_process_of_getting_more_artists}if(is_close_to_bottom(a,selector,threshold)&&!in_process_of_getting_more){var b=$("#param_one").val(),c=$("#param_two").val();"undefined"!=typeof b&&""!=b?(get_next_list_items(a,b,"",load_the_rest),"undefined"!=typeof c&&""!=c&&get_next_list_items(a,
b,c,load_the_rest)):get_next_list_items(a,"","",load_the_rest)}},b||500)}function is_close_to_bottom(a,b,c){var d,a=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,b=$(b).height();d=$(window).height();return b-c<=a+d}
function get_next_list_items(a,b,c,d){url="/artists/more";items_to_retrieve=listed_so_far=20;divId="#artistsList";first_param=b||"";second_param=c||"";switch(a){case "genres":listed_so_far=genres_listed_so_far;items_to_retrieve=genres_to_retrieve;in_process_of_getting_more_genres=!0;url="/genres/more";divId="#genresList";break;case "artists":listed_so_far=artists_listed_so_far;items_to_retrieve=artists_to_retrieve;in_process_of_getting_more_artists=!0;url="/artists/more";divId="#artistsList";break;
case "albums":listed_so_far=albums_listed_so_far;items_to_retrieve=albums_to_retrieve;in_process_of_getting_more_albums=!0;url="/albums/more";divId="#albumsList";break;case "tracks":listed_so_far=tracks_listed_so_far;items_to_retrieve=tracks_to_retrieve;in_process_of_getting_more_tracks=!0;url="/tracks/more";divId="#tracksList";break;case "queue":listed_so_far=queue_tracks_listed_so_far;items_to_retrieve=queue_tracks_to_retrieve;in_process_of_getting_more_queue_tracks=!0;url="/queue/more";divId="#queueTracksList";
break;case "playlists":listed_so_far=playlists_listed_so_far;items_to_retrieve=playlists_to_retrieve;in_process_of_getting_more_playlists=!0;url="/playlists/more";divId="#playlistsList";break;case "stations":listed_so_far=stations_listed_so_far;items_to_retrieve=stations_to_retrieve;in_process_of_getting_more_stations=!0;url="/stations/more";divId="#stationsList";break;default:listed_so_far=artists_listed_so_far,items_to_retrieve=artists_to_retrieve,in_process_of_getting_more_artists=!0,url="/artists/more",
divId="#artistsList"}!0==d&&(items_to_retrieve="all");$("#lazyloaderProgressDiv").show(200,function(){setTimeout(function(){$.ajax({type:"POST",url:url,async:!0,data:"listed_so_far="+listed_so_far+"&items_to_retrieve="+items_to_retrieve+"&first_param="+escape(first_param)+"&second_param="+escape(second_param),success:function(b){more_items=$.parseJSON(b);more_items_count=more_items.data[0].count;more_items_html=more_items.data[0].html;0<more_items_count&&($(divId+" li").last().before(more_items_html),
$(divId).listview("refresh"),listed_so_far+=parseInt(more_items_count));$("#lazyloaderProgressDiv").hide(250);switch(a){case "genres":in_process_of_getting_more_genres=!1;genres_listed_so_far=listed_so_far;break;case "artists":in_process_of_getting_more_artists=!1;artists_listed_so_far=listed_so_far;break;case "albums":in_process_of_getting_more_albums=!1;albums_listed_so_far=listed_so_far;break;case "tracks":in_process_of_getting_more_tracks=!1;tracks_listed_so_far=listed_so_far;break;case "queue":in_process_of_getting_more_queue_tracks=
!1;queue_tracks_listed_so_far=listed_so_far;break;case "playlists":in_process_of_getting_more_playlists=!1;playlists_listed_so_far=listed_so_far;break;case "stations":in_process_of_getting_more_stations=!1;stations_listed_so_far=listed_so_far;break;default:in_process_of_getting_more_artists=!1,artists_listed_so_far=listed_so_far}}})},200)})};
